import{d as e,v as a,s,ah as l,an as t,aE as o,o as i,c as u,w as n,h as c,b as r,k as d,e as f,f as v,F as m,aA as p,r as y,a as _,ac as x,j as h,p as g,D as b,t as k}from"./index.ff1c4658.js";import{_ as j}from"./u-icon.5d484aeb.js";import{_ as w}from"./z-paging.03bb45d3.js";import{a as H}from"./store.1bdd0081.js";import{b as C}from"./shop.9fdb08cc.js";import{C as M}from"./index.2eb85c72.js";import{_ as V}from"./plugin-vue_export-helper.21dcd24c.js";import"./u-image.85f4d24b.js";import"./index.025f3805.js";var E=V(e({__name:"index",setup(e){const V=a(!1),E=a(""),S=a(!1),z=a(""),F=s(),G=a([]),L=a([]),U=a([]),A=()=>{V.value=!0,""!=z.value&&(z.value="",o({title:"搜索"})),F.value.reload()},B=async(e,a)=>{if(E.value){const e=E.value.replace(/^\s+|\s+$/g);L.value.includes(e)||(L.value.unshift(e),t.set("history",L.value))}try{const{lists:s}=await H({page_no:e,page_size:a,category_id:z.value,name:E.value});F.value.complete(s)}catch(s){console.log("下拉加载",s),F.value.complete(!1)}},D=async()=>{(await p({title:"温馨提示",content:"是否清空历史记录？"})).confirm&&(t.set("history",""),L.value=[])},I=e=>{E.value=e,V.value=!0};return l((e=>{L.value=t.get("history")||[];const a=(null==e?void 0:e.id)||void 0,s=(null==e?void 0:e.name)||void 0;a&&(z.value=a,V.value=!0,o({title:s})),(async()=>{try{U.value=await C(),console.log(U.value)}catch(e){console.log("获取热门搜索失败=>",e)}})()})),(e,a)=>{const s=y(_("u-icon"),j),l=x,t=h,o=g,p=b,H=y(_("z-paging"),w);return i(),u(t,{class:"container"},{default:n((()=>[c(" Header Search Start "),r(t,{class:"search-box flex bg-white"},{default:n((()=>[r(t,{class:"search flex"},{default:n((()=>[c(" 左侧图标 "),r(s,{name:"search",size:"34",color:"#888888"}),c(" 输入 "),r(l,{modelValue:E.value,"onUpdate:modelValue":a[0]||(a[0]=e=>E.value=e),type:"text",class:"search--input",placeholder:"请输入关键词搜索",onFocus:a[1]||(a[1]=e=>S.value=!0),onBlur:a[2]||(a[2]=e=>S.value=!1)},null,8,["modelValue"]),c(" 清空图标 ")])),_:1}),r(t,{class:"flex justify-center items-center text-lg ml-2",onClick:A},{default:n((()=>[d(" 搜索 ")])),_:1})])),_:1}),c(" Header Search End "),c(" Main History Start "),!1===V.value?(i(),u(t,{key:0,class:"history bg-white"},{default:n((()=>[c(" Hot Header "),0!=U.value.status?(i(),u(t,{key:0,class:"flex justify-between"},{default:n((()=>[r(o,{class:"font-medium text-base"},{default:n((()=>[d("热门搜索")])),_:1})])),_:1})):c("v-if",!0),c(" Hot Main "),0!=U.value.status?(i(),u(t,{key:1,class:"flex flex-wrap mt-[30rpx]"},{default:n((()=>[(i(!0),f(m,null,v(U.value.data,(e=>(i(),u(t,{key:e,class:"history-item",onClick:a=>I(e.name)},{default:n((()=>[d(k(e.name),1)])),_:2},1032,["onClick"])))),128))])),_:1})):c("v-if",!0),c(" Main Hot End "),c(" History Header "),r(t,{class:"flex justify-between"},{default:n((()=>[r(o,{class:"font-medium text-base"},{default:n((()=>[d("历史搜索")])),_:1}),r(p,{src:"../../static/images/icon_del.png",onClick:D},null,8,["src"])])),_:1}),c(" History Main "),r(t,{class:"flex flex-wrap mt-[30rpx]"},{default:n((()=>[(i(!0),f(m,null,v(L.value,(e=>(i(),u(t,{key:e,class:"history-item",onClick:a=>I(e)},{default:n((()=>[d(k(e),1)])),_:2},1032,["onClick"])))),128))])),_:1}),c(" Main History End ")])),_:1})):c("v-if",!0),c(" Main GoodsLists Start "),!0===V.value?(i(),u(t,{key:1,class:"content pt-[24rpx] bg-white"},{default:n((()=>[r(H,{ref_key:"paging",ref:F,modelValue:G.value,"onUpdate:modelValue":a[3]||(a[3]=e=>G.value=e),onQuery:B,fixed:!1},{default:n((()=>[r(M,{type:"lists",list:G.value},null,8,["list"])])),_:1},8,["modelValue"])])),_:1})):c("v-if",!0),c(" Main GoodsLists End ")])),_:1})}}}),[["__scopeId","data-v-15b57f14"]]);export{E as default};
